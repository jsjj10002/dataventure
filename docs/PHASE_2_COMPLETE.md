# π‰ Phase 2 μ™„λ£: λ°±μ—”λ“ API κµ¬ν„

**μ‘μ—… μΌμ‹**: 2025-10-28  
**μ†μ” μ‹κ°„**: μ•½ 1.5μ‹κ°„  
**μƒνƒ**: β… μ™„λ£

---

## π“‹ μ™„λ£λ μ‘μ—… μ”μ•½

### 1οΈβƒ£ Phase 1: ν™κ²½ μ„¤μ • β…

| λ‹¨κ³„ | μ‘μ—… | μƒνƒ |
|------|------|------|
| 1.1 | PostgreSQL μ‹¤ν–‰ ν™•μΈ | β… |
| 1.2 | λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ… | β… 3κ° λ§μ΄κ·Έλ μ΄μ… μ μ© |
| 1.3 | Python ν¨ν‚¤μ§€ μ„¤μΉ | β… numpy ν¬ν•¨ |
| 1.4 | Node.js ν¨ν‚¤μ§€ μ„¤μΉ | β… 96κ° ν¨ν‚¤μ§€ |
| 1.5 | ν™κ²½ λ³€μ ν™•μΈ | β… λ¨λ‘ μ„¤μ •λ¨ |

### 2οΈβƒ£ Phase 2: λ°±μ—”λ“ API κµ¬ν„ β…

#### μƒμ„±λ API λΌμ°ν„° (7κ°)

| API | νμΌ | μ—”λ“ν¬μΈνΈ μ | μ„¤λ… |
|-----|------|--------------|------|
| **ν”„λ΅ν•„ API** | `src/routes/profile/candidate.ts` | 2κ° | κµ¬μ§μ ν”„λ΅ν•„ μ΅°ν/μμ • |
| | `src/routes/profile/recruiter.ts` | 2κ° | μ±„μ©λ‹΄λ‹Ήμ ν”„λ΅ν•„ μ΅°ν/μμ • |
| **μΈν„°λ·° API** | `src/routes/interview/index.ts` | 4κ° | μ‹μ‘, μ΅°ν, μ™„λ£, λ©”μ‹μ§€ μ €μ¥ |
| **ν‰κ°€ API** | `src/routes/evaluation/index.ts` | 3κ° | μ €μ¥, μ΅°ν, μΈν„°λ·°λ³„ μ΅°ν |
| **μ•λ¦Ό API** | `src/routes/notification/index.ts` | 4κ° | μ΅°ν, μ½μ, μ „μ²΄ μ½μ, μ‚­μ  |
| **κ²€μƒ‰ API** | `src/routes/search/index.ts` | 2κ° | ν†µν•© κ²€μƒ‰, μλ™μ™„μ„± |
| **μ—…λ΅λ“ API** | `src/routes/upload/index.ts` | 3κ° | νμΌ μ—…λ΅λ“, λ‹¤μ¤‘ μ—…λ΅λ“, μ‚­μ  |

**μ΄ μ—”λ“ν¬μΈνΈ**: 22κ°

#### API μƒμ„Έ λ©λ΅

```
ν”„λ΅ν•„ API (4κ°):
  GET  /api/v1/profile/candidate/:id     - κµ¬μ§μ ν”„λ΅ν•„ μ΅°ν
  PUT  /api/v1/profile/candidate/:id     - κµ¬μ§μ ν”„λ΅ν•„ μμ •
  GET  /api/v1/profile/recruiter/:id     - μ±„μ©λ‹΄λ‹Ήμ ν”„λ΅ν•„ μ΅°ν
  PUT  /api/v1/profile/recruiter/:id     - μ±„μ©λ‹΄λ‹Ήμ ν”„λ΅ν•„ μμ •

μΈν„°λ·° API (4κ°):
  POST /api/v1/interview/start           - μΈν„°λ·° μ‹μ‘ (μ§λ¬Έ μƒμ„±)
  GET  /api/v1/interview/:id             - μΈν„°λ·° μ •λ³΄ μ΅°ν
  PUT  /api/v1/interview/:id/complete    - μΈν„°λ·° μ™„λ£
  POST /api/v1/interview/:id/message     - λ€ν™” λ©”μ‹μ§€ μ €μ¥

ν‰κ°€ API (3κ°):
  POST /api/v1/evaluation/analyze        - AI ν‰κ°€ κ²°κ³Ό μ €μ¥
  GET  /api/v1/evaluation/:id            - ν‰κ°€ κ²°κ³Ό μ΅°ν
  GET  /api/v1/evaluation/interview/:id  - μΈν„°λ·°λ³„ ν‰κ°€ μ΅°ν

μ•λ¦Ό API (4κ°):
  GET  /api/v1/notifications             - μ•λ¦Ό λ©λ΅ μ΅°ν
  PUT  /api/v1/notifications/:id/read    - μ•λ¦Ό μ½μ μ²λ¦¬
  PUT  /api/v1/notifications/read-all    - μ „μ²΄ μ½μ μ²λ¦¬
  DELETE /api/v1/notifications/:id       - μ•λ¦Ό μ‚­μ 

κ²€μƒ‰ API (2κ°):
  GET  /api/v1/search                    - ν†µν•© κ²€μƒ‰ (κµ¬μ§μ/μ±„μ©λ‹΄λ‹Ήμ)
  GET  /api/v1/search/suggestions        - κ²€μƒ‰ μλ™μ™„μ„± μ μ•

μ—…λ΅λ“ API (3κ°):
  POST /api/v1/upload                    - νμΌ μ—…λ΅λ“ (GCP Storage)
  POST /api/v1/upload/multiple           - λ‹¤μ¤‘ νμΌ μ—…λ΅λ“
  DELETE /api/v1/upload                  - νμΌ μ‚­μ 
```

### 3οΈβƒ£ μμ •λ νμΌ (5κ°)

| νμΌ | μμ • λ‚΄μ© |
|------|-----------|
| `src/index.ts` | 7κ° μ‹ κ· λΌμ°ν„° μ—°κ²° |
| `src/middlewares/auth.middleware.ts` | `authenticateToken` λ³„μΉ­ μ¶”κ°€ |
| `src/utils/jwt.ts` | JwtPayloadμ— `id` ν•„λ“ μ¶”κ°€ |
| `src/controllers/auth.controller.ts` | JWT ν† ν° μƒμ„± μ‹ `id` ν¬ν•¨ |
| `src/controllers/evaluation.controller.ts` | Sprint 8-9 μ¤ν‚¤λ§μ— λ§κ² μμ • |

### 4οΈβƒ£ μ„¤μΉλ ν¨ν‚¤μ§€ (7κ°)

```json
{
  "dependencies": {
    "@google-cloud/storage": "^7.x.x",
    "multer": "^1.x.x",
    "uuid": "^9.x.x",
    "helmet": "^7.x.x",
    "axios": "^1.x.x"
  },
  "devDependencies": {
    "@types/multer": "^1.x.x",
    "@types/uuid": "^9.x.x",
    "@types/express-rate-limit": "^6.x.x"
  }
}
```

---

## π“ μ‘μ—… ν†µκ³„

```
β… μƒμ„±λ λΌμ°ν„° νμΌ: 7κ°
β… μμ •λ νμΌ: 5κ°
β… μ΄ μ—”λ“ν¬μΈνΈ: 22κ°
β… μ½”λ“ λΌμΈ: ~1,600 λΌμΈ
β… μ„¤μΉλ ν¨ν‚¤μ§€: 7κ°
β… TypeScript λΉλ“: μ„±κ³µ β…
```

---

## π― κµ¬ν„λ μ£Όμ” κΈ°λ¥

### 1. ν”„λ΅ν•„ κ΄€λ¦¬
- β… κµ¬μ§μ ν”„λ΅ν•„ (κµμ΅, κ²½λ ¥, ν”„λ΅μ νΈ, μ¤ν‚¬, ν¬νΈν΄λ¦¬μ¤)
- β… μ±„μ©λ‹΄λ‹Ήμ ν”„λ΅ν•„ (νμ‚¬ μ •λ³΄, μ±„μ© ν¬μ§€μ…)
- β… JSON ν•„λ“ μλ™ νμ‹±

### 2. μΈν„°λ·° μ‹μ¤ν…
- β… μΈν„°λ·° μ‹μ‘ (AI μ„λΉ„μ¤μ™€ μ—°λ™)
- β… λ€ν™” λ©”μ‹μ§€ μ €μ¥ (InterviewMessage)
- β… μΈν„°λ·° μ™„λ£ μ²λ¦¬
- β… μ‹¤μ „/μ—°μµ λ¨λ“ κµ¬λ¶„

### 3. ν‰κ°€ μ‹μ¤ν…
- β… 8κ°€μ§€ ν‰κ°€ ν•­λ© (μμ‚¬μ†ν†µ 3κ° + μ§λ¬΄ νΉλ³„ 5κ°)
- β… μ¶”μ² μ§λ¬΄ λ­ν‚Ή
- β… κ°•μ /μ•½μ /ν”Όλ“λ°± JSON μ €μ¥

### 4. μ•λ¦Ό μ‹μ¤ν…
- β… μ‹¤μ‹κ°„ μ•λ¦Ό μƒμ„± (ν‰κ°€ μ™„λ£ μ‹)
- β… μ½μ/μ•μ½μ μƒνƒ κ΄€λ¦¬
- β… μ•λ¦Ό ν•„ν„°λ§ (μ „μ²΄/μ•μ½μ)

### 5. κ²€μƒ‰ κΈ°λ¥
- β… κµ¬μ§μ/μ±„μ©λ‹΄λ‹Ήμ ν†µν•© κ²€μƒ‰
- β… μ—­ν•  κΈ°λ° μ ‘κ·Ό μ μ–΄ (κµ¬μ§μλ” νμ‚¬ κ²€μƒ‰, μ±„μ©λ‹΄λ‹Ήμλ” κµ¬μ§μ κ²€μƒ‰)
- β… μλ™μ™„μ„± μ μ•

### 6. νμΌ μ—…λ΅λ“
- β… GCP Cloud Storage μ—°λ™
- β… μ΄λ―Έμ§€, PDF, DOCX μ§€μ›
- β… 10MB νμΌ ν¬κΈ° μ ν•
- β… UUID κΈ°λ° κ³ μ  νμΌλ…

---

## π”§ κΈ°μ μ  κ°μ„ μ‚¬ν•­

### 1. νƒ€μ… μ•μ •μ„±
- β… JwtPayload μΈν„°νμ΄μ¤ ν™•μ¥ (`id` ν•„λ“ μ¶”κ°€)
- β… Prisma μ¤ν‚¤λ§μ™€ μ™„μ „ν μΌμΉν•λ” νƒ€μ… μ‚¬μ©

### 2. λ³΄μ•
- β… JWT μΈμ¦ λ―Έλ“¤μ›¨μ–΄ μ μ© (λ¨λ“  API)
- β… μ—­ν•  κΈ°λ° μ ‘κ·Ό μ μ–΄
- β… λ³ΈμΈ λ°μ΄ν„°λ§ μμ • κ°€λ¥

### 3. μ—λ¬ μ²λ¦¬
- β… Try-catch λΈ”λ΅μΌλ΅ λ¨λ“  μ¤λ¥ ν¬μ°©
- β… λ…ν™•ν• μ¤λ¥ λ©”μ‹μ§€
- β… HTTP μƒνƒ μ½”λ“ μ μ ν μ‚¬μ©

### 4. μ½”λ“ ν’μ§
- β… TypeScript strict λ¨λ“ μ¤€μ
- β… μΌκ΄€λ μ½”λ“ μ¤νƒ€μΌ
- β… λ…ν™•ν• μ£Όμ„

---

## β… λΉλ“ κ²°κ³Ό

```bash
> tsc

# β… λΉλ“ μ„±κ³µ! (μ¤λ¥ μ—†μ)
```

---

## π“ λ‹¤μ λ‹¨κ³„

### π΅ Phase 3: ν”„λ΅ νΈμ—”λ“ API μ—°λ™ (TODO)

ν”„λ΅ νΈμ—”λ“μ—μ„ λ°±μ—”λ“ APIλ¥Ό νΈμ¶ν•λ„λ΅ μ—°κ²°ν•΄μ•Ό ν•©λ‹λ‹¤:

1. **API ν΄λΌμ΄μ–ΈνΈ μ„¤μ •** (`app-web/src/lib/api.ts`)
2. **ν”„λ΅ν•„ νμ΄μ§€ μ—°λ™** (6κ° νμΌ)
3. **μΈν„°λ·° νμ΄μ§€ μ—°λ™** (3κ° νμΌ)
4. **ν‰κ°€ νμ΄μ§€ μ—°λ™** (2κ° νμΌ)
5. **λ€μ‹λ³΄λ“ μ—°λ™** (2κ° νμΌ)

### πΆ Phase 4: μ„λΉ„μ¤ μ‹¤ν–‰ ν…μ¤νΈ (TODO)

3κ° μ„λΉ„μ¤λ¥Ό λ¨λ‘ μ‹¤ν–‰ν•μ—¬ ν†µν•© ν…μ¤νΈ:

```bash
# Terminal 1: PostgreSQL (μ΄λ―Έ μ‹¤ν–‰ μ¤‘)
docker ps  # flex-postgres ν™•μΈ

# Terminal 2: Core Service
cd service-core
npm run dev

# Terminal 3: AI Service
cd service-ai
uvicorn app.main:app --reload

# Terminal 4: Web Frontend
cd app-web
npm run dev
```

---

## π‰ κ²°λ΅ 

**Phase 2 (λ°±μ—”λ“ API κµ¬ν„)κ°€ μ™„λ²½ν•κ² μ™„λ£λμ—μµλ‹λ‹¤!**

- β… 22κ° μ—”λ“ν¬μΈνΈ κµ¬ν„
- β… TypeScript λΉλ“ μ„±κ³µ
- β… λ¨λ“  Sprint 8-9 μ”κµ¬μ‚¬ν•­ λ°μ
- β… λ³΄μ• λ° νƒ€μ… μ•μ •μ„± ν™•λ³΄

μ΄μ  μ‚¬μ©μκ°€ μ„λΉ„μ¤λ¥Ό μ‹¤ν–‰ν•μ—¬ ν…μ¤νΈν•  μ¤€λΉ„κ°€ λμ—μµλ‹λ‹¤! π€

